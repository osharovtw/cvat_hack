(()=>{var n={259:function(n,e){var t,r;t=function(){var n;!function(){(n=this)||("undefined"!=typeof window?n=window:"undefined"!=typeof self&&(n=self))}();var e=function(e,t){var r,a=void 0!==a?a:{},i={};for(r in a)a.hasOwnProperty(r)&&(i[r]=a[r]);var o,f=[],s="";s=0!==(s=self.location.href).indexOf("blob:")?s.substr(0,s.lastIndexOf("/")+1):"",o=function(n){var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)};var u=a.print||console.log.bind(console),c=a.printErr||console.warn.bind(console);for(r in i)i.hasOwnProperty(r)&&(a[r]=i[r]);i=null,a.arguments&&(f=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit;var d,l,h={"f64-rem":function(n,e){return n%e},debugger:function(){}};new Array(0),a.wasmBinary&&(d=a.wasmBinary),a.noExitRuntime&&a.noExitRuntime,"object"!=typeof WebAssembly&&c("no native wasm support detected");var p=new WebAssembly.Table({initial:10,maximum:10,element:"anyfunc"}),y=!1,v="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function m(n,e,t){for(var r=e+t,a=e;n[a]&&!(a>=r);)++a;if(a-e>16&&n.subarray&&v)return v.decode(n.subarray(e,a));for(var i="";e<a;){var o=n[e++];if(128&o){var f=63&n[e++];if(192!=(224&o)){var s=63&n[e++];if((o=224==(240&o)?(15&o)<<12|f<<6|s:(7&o)<<18|f<<12|s<<6|63&n[e++])<65536)i+=String.fromCharCode(o);else{var u=o-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&o)<<6|f)}else i+=String.fromCharCode(o)}return i}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var g,w,b,A;var D,M=a.TOTAL_MEMORY||104857600;function P(n){for(;n.length>0;){var e=n.shift();if("function"!=typeof e){var t=e.func;"number"==typeof t?void 0===e.arg?a.dynCall_v(t):a.dynCall_vi(t,e.arg):t(void 0===e.arg?null:e.arg)}else e()}}(l=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:M/65536,maximum:M/65536}))&&(g=l.buffer),M=g.byteLength,g=D=g,a.HEAP8=w=new Int8Array(D),a.HEAP16=new Int16Array(D),a.HEAP32=A=new Int32Array(D),a.HEAPU8=b=new Uint8Array(D),a.HEAPU16=new Uint16Array(D),a.HEAPU32=new Uint32Array(D),a.HEAPF32=new Float32Array(D),a.HEAPF64=new Float64Array(D),A[2748]=5254064;var R=[],U=[],S=[],_=[];var E=0,I=null,x=null;function B(n){throw a.onAbort&&a.onAbort(n),u(n+=""),c(n),y=!0,n="abort("+n+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(n)}a.preloadedImages={},a.preloadedAudios={};var C="data:application/octet-stream;base64,";function H(n){return String.prototype.startsWith?n.startsWith(C):0===n.indexOf(C)}var O,T="avc.wasm";function W(){try{if(d)return new Uint8Array(d);if(o)return o(T);throw"both async and sync fetching of the wasm failed"}catch(n){B(n)}}H(T)||(O=T,T=a.locateFile?a.locateFile(O,s):s+O),a.asm=function(){var n={env:q,wasi_unstable:q,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:h};function e(n,e){var t=n.exports;a.asm=t,function(n){if(E--,a.monitorRunDependencies&&a.monitorRunDependencies(E),0==E&&(null!==I&&(clearInterval(I),I=null),x)){var e=x;x=null,e()}}()}function t(n){e(n.instance)}function r(e){return(d||"function"!=typeof fetch?new Promise((function(n,e){n(W())})):fetch(T,{credentials:"same-origin"}).then((function(n){if(!n.ok)throw"failed to load wasm binary file at '"+T+"'";return n.arrayBuffer()})).catch((function(){return W()}))).then((function(e){return WebAssembly.instantiate(e,n)})).then(e,(function(n){c("failed to asynchronously prepare wasm: "+n),B(n)}))}if(E++,a.monitorRunDependencies&&a.monitorRunDependencies(E),a.instantiateWasm)try{return a.instantiateWasm(n,e)}catch(n){return c("Module.instantiateWasm callback failed with error: "+n),!1}return function(){if(d||"function"!=typeof WebAssembly.instantiateStreaming||H(T)||"function"!=typeof fetch)return r(t);fetch(T,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,n).then(t,(function(n){c("wasm streaming compile failed: "+n),c("falling back to ArrayBuffer instantiation"),r(t)}))}))}(),{}};var F={buffers:[null,[],[]],printChar:function(n,e){var t=F.buffers[n];0===e||10===e?((1===n?u:c)(m(t,0)),t.length=0):t.push(e)},varargs:0,get:function(n){return F.varargs+=4,A[F.varargs-4>>2]},getStr:function(){return(n=F.get())?m(b,n,e):"";var n,e},get64:function(){var n=F.get();return F.get(),n},getZero:function(){F.get()}};function N(n,e,t,r){try{for(var a=0,i=0;i<t;i++){for(var o=A[e+8*i>>2],f=A[e+(8*i+4)>>2],s=0;s<f;s++)F.printChar(n,b[o+s]);a+=f}return A[r>>2]=a,0}catch(n){return"undefined"!=typeof FS&&n instanceof FS.ErrnoError||B(n),n.errno}}function k(){e()}function z(n,e,r){t(n,e,r)}a._broadwayOnHeadersDecoded=k,a._broadwayOnPictureDecoded=z;var L,j,q={g:function(){return N.apply(null,arguments)},__memory_base:1024,__table_base:0,f:k,e:z,b:function(){return w.length},d:function(n,e,t){b.set(b.subarray(e,e+t),n)},a:function(n){B("OOM")},c:B,memory:l,table:p},G=a.asm({},q,g);function V(n){function e(){L||(L=!0,y||(P(U),P(S),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)n=a.postRun.shift(),_.unshift(n);var n;P(_)}()))}n=n||f,E>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)n=a.preRun.shift(),R.unshift(n);var n;P(R)}(),E>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),e()}),1)):e()))}if(a.asm=G,a._broadwayCreateStream=function(){return a.asm.h.apply(null,arguments)},a._broadwayExit=function(){return a.asm.i.apply(null,arguments)},a._broadwayGetMajorVersion=function(){return a.asm.j.apply(null,arguments)},a._broadwayGetMinorVersion=function(){return a.asm.k.apply(null,arguments)},a._broadwayInit=function(){return a.asm.l.apply(null,arguments)},a._broadwayPlayStream=function(){return a.asm.m.apply(null,arguments)},a.asm=G,x=function n(){L||V(),L||(x=n)},a.run=V,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();V(),void 0!==n&&n.Module&&(j=n.Module),void 0!==a&&(j=a),j._broadwayOnHeadersDecoded=e,j._broadwayOnPictureDecoded=t;var X,Y=!1;return j.onRuntimeInitialized=function(){Y=!0,X&&X(j)},function(n){Y?n(j):X=n}};return function(){"use strict";var t=function(){return(new Date).getTime()};"undefined"!=typeof performance&&performance.now&&(t=function(){return performance.now()});var r=function(n){var r;this.options=n||{},this.now=t;var a,o,f=function(n,e,o){var f,s=this.pictureBuffers[n];s||(s=this.pictureBuffers[n]=a(n,e*o*3/2));var u=!1;if(this.infoAr.length&&(u=!0,f=this.infoAr),this.infoAr=[],this.options.rgb){r||(r=i(e,o)),r.inp.set(s),r.doit();var c=new Uint8Array(r.outSize);return c.set(r.out),u&&(f[0].finishDecoding=t()),void this.onPictureDecoded(c,e,o,f)}u&&(f[0].finishDecoding=t()),this.onPictureDecoded(s,e,o,f)}.bind(this);this.options.sliceMode&&(f=function(n,e,r,i){var f=this.pictureBuffers[n];f||(f=this.pictureBuffers[n]=a(n,e*r*3/2));var s,u=this.pictureBuffers[i];u||(u=this.pictureBuffers[i]=o(i,18)),this.infoAr.length&&(s=this.infoAr),this.infoAr=[],s[0].finishDecoding=t();for(var c=[],d=0;d<20;++d)c.push(u[d]);s[0].sliceInfoAr=c,this.onPictureDecoded(f,e,r,s)}.bind(this));var s=e.apply({},[function(){},f]),u=1048576,c=this;this.onPictureDecoded=function(n,e,t,r){},this.onDecoderReady=function(){};var d=[];this.decode=function(n,e,t){d.push([n,e,t])},s((function(n){n.HEAP8;var e=n.HEAPU8;n.HEAP16,n.HEAP32,n._broadwayInit(),a=function(n,t){return e.subarray(n,n+t)},o=function(n,t){return new Uint32Array(e.buffer,n,t)},c.streamBuffer=a(n._broadwayCreateStream(u),u),c.pictureBuffers={},c.infoAr=[];var r=0;if(c.options.sliceMode?(r=c.options.sliceNum,c.decode=function(e,a,i){c.infoAr.push(a),a.startDecoding=t();var o,f=a.nals;if(!f){f=[],a.nals=f;var s=e.length,u=!1,d=0,l=0;for(o=0;o<s;++o)if(1===e[o]&&0===e[o-1]&&0===e[o-2]){var h=o-2;0===e[o-3]&&(h=o-3),u&&f.push({offset:d,end:h,type:31&e[l]}),d=h,l=h+3,0===e[o-3]&&(l=h+4),u=!0}u&&f.push({offset:d,end:o,type:31&e[l]})}var p,y=0,v=0;for(o=0;o<f.length;++o)1===f[o].type||5===f[o].type?(y===r&&(p=e.subarray(f[o].offset,f[o].end),c.streamBuffer[v]=0,v+=1,c.streamBuffer.set(p,v),v+=p.length),y+=1):(p=e.subarray(f[o].offset,f[o].end),c.streamBuffer[v]=0,v+=1,c.streamBuffer.set(p,v),v+=p.length,n._broadwayPlayStream(v),v=0);i(),n._broadwayPlayStream(v)}):c.decode=function(e,r){r&&(c.infoAr.push(r),r.startDecoding=t()),c.streamBuffer.set(e),n._broadwayPlayStream(e.length)},d.length){var i=0;for(i=0;i<d.length;++i)c.decode(d[i][0],d[i][1],d[i][2]);d=[]}c.onDecoderReady(c)}))};r.prototype={};var a={},i=function(e,t){var r=e+"x"+t;if(a[r])return a[r];for(var i=e*t,o=(0|i)>>2,f=i+o+o,s=e*t*4,u=f+s+4*Math.pow(2,24),c=Math.pow(2,24),d=c;d<u;)d+=c;var l=new ArrayBuffer(d),h=function(n,e,t){"use asm";var r=n.Math.imul,a=n.Math.min,i=n.Math.max,o=n.Math.pow,f=new n.Uint8Array(t),s=new n.Uint32Array(t),u=new n.Uint8Array(t),c=new n.Uint8Array(t),d=new n.Uint32Array(t),l=0,h=0,p=0,y=0,v=0,m=0,g=0,w=0,b=0,A=0;function D(n,e){n=n|0;e=e|0;var t=0;var a=0;l=n;b=r(n,4)|0;h=e;p=r(l|0,h|0)|0;y=(p|0)>>2;m=r(r(l,h)|0,4)|0;v=(p+y|0)+y|0;w=0;g=w+m|0;A=g+v|0;a=~~+o(+2,+24);a=r(a,4)|0;for(t=0|0;(t|0)<(a|0)|0;t=t+4|0){d[(A+t|0)>>2]=0}}function M(){var n=0;var e=0;var t=0;var r=0;var a=0;var i=0;var o=0;var f=0;var s=0;var c=0;var v=0;var m=0;var D=0;var M=0;D=w|0;n=g|0;e=n+p|0|0;t=e+y|0;for(s=0;(s|0)<(h|0);s=s+2|0){v=e;m=t;for(c=0;(c|0)<(l|0);c=c+2|0){r=u[n>>0]|0;a=u[(n+l|0)>>0]|0;i=u[e>>0]|0;o=u[t>>0]|0;M=((r<<16|0)+(i<<8|0)|0)+o|0;f=d[(A>>2)+M|0]|0;if(f){}else{f=P(r,i,o)|0;d[(A>>2)+M|0]=f|0}d[D>>2]=f;M=((a<<16|0)+(i<<8|0)|0)+o|0;f=d[(A>>2)+M|0]|0;if(f){}else{f=P(a,i,o)|0;d[(A>>2)+M|0]=f|0}d[(D+b|0)>>2]=f;D=D+4|0;n=n+1|0;r=u[n>>0]|0;a=u[(n+l|0)>>0]|0;M=((r<<16|0)+(i<<8|0)|0)+o|0;f=d[(A>>2)+M|0]|0;if(f){}else{f=P(r,i,o)|0;d[(A>>2)+M|0]=f|0}d[D>>2]=f;M=((a<<16|0)+(i<<8|0)|0)+o|0;f=d[(A>>2)+M|0]|0;if(f){}else{f=P(a,i,o)|0;d[(A>>2)+M|0]=f|0}d[(D+b|0)>>2]=f;D=D+4|0;n=n+1|0;e=e+1|0;t=t+1|0}D=D+b|0;n=n+l|0}}function P(n,e,t){n=n|0;e=e|0;t=t|0;var o=0;var f=0;var s=0;var u=0;var c=0;var d=0;var l=0;var h=0;var p=0;c=r(1192,n-16|0)|0;d=r(1634,t-128|0)|0;l=r(832,t-128|0)|0;h=r(400,e-128|0)|0;p=r(2066,e-128|0)|0;o=(c+d|0)>>10|0;f=((c-l|0)-h|0)>>10|0;s=(c+p|0)>>10|0;if((o&255|0)!=(o|0)|0){o=a(255,i(0,o|0)|0)|0}if((f&255|0)!=(f|0)|0){f=a(255,i(0,f|0)|0)|0}if((s&255|0)!=(s|0)|0){s=a(255,i(0,s|0)|0)|0}u=255;u=u<<8|0;u=u+s|0;u=u<<8|0;u=u+f|0;u=u<<8|0;u=u+o|0;return u|0}return{init:D,doit:M}}(n,{},l);return h.init(e,t),a[r]=h,h.heap=l,h.out=new Uint8Array(l,0,s),h.inp=new Uint8Array(l,s,f),h.outSize=s,h};if("undefined"!=typeof self){var o,f,s,u,c,d,l=!1,h=!1,p=!1,y=0,v=0,m=0,g=0,w=[],b=[],A=function(n){if(b.length){for(var e=b.shift();e&&e.byteLength!==n;)e=b.shift();if(e)return e}return new ArrayBuffer(n)},D=function(n,e,t,r,a){var i=function(t,a){var i=0;for(i=0;i<16;++i){var o=t+r*i,f=a+r*i;e.set(n.subarray(o,f),o)}},o=function(t,a){var i=0;for(i=0;i<8;++i){var o=t+r/2*i,f=a+r/2*i;e.set(n.subarray(o,f),o)}},f=function(t,r){e.set(n.subarray(t,r),t)},s=t[0],u=t[1];u>0&&(i(s,u),o(t[2],t[3]),o(t[4],t[5])),s=t[6],(u=t[7])>0&&(i(s,u),o(t[8],t[9]),o(t[10],t[11])),s=t[12],(u=t[15])>0&&(f(s,u),f(t[13],t[16]),f(t[14],t[17]))},M=function(n){m=(v=n)-1};self.addEventListener("message",(function(n){if(l){if(h&&n.data.reuse&&b.push(n.data.reuse),n.data.buf)return void(p&&0!==g?w.push(n.data):o.decode(new Uint8Array(n.data.buf,n.data.offset||0,n.data.length),n.data.info,(function(){p&&y!==m&&postMessage(n.data,[n.data.buf])})));if(n.data.slice){var e=t();if(D(new Uint8Array(n.data.slice),s,n.data.infos[0].sliceInfoAr,n.data.width,n.data.height),n.data.theOne&&(D(s,new Uint8Array(n.data.slice),f,n.data.width,n.data.height),d>n.data.infos[0].timeDecoding&&(n.data.infos[0].timeDecoding=d),n.data.infos[0].timeCopy+=t()-e),postMessage(n.data,[n.data.slice]),0==(g-=1)&&w.length){var a=w.shift();o.decode(new Uint8Array(a.buf,a.offset||0,a.length),a.info,(function(){p&&y!==m&&postMessage(a,[a.buf])}))}return}if(n.data.setSliceCnt)return void M(n.data.sliceCnt)}else n.data&&"Broadway.js - Worker init"===n.data.type&&(l=!0,o=new r(n.data.options),n.data.options.sliceMode?(h=!0,p=!0,y=n.data.options.sliceNum,M(n.data.options.sliceCnt),o.onPictureDecoded=function(n,e,t,r){var a=new Uint8Array(A(n.length));D(n,a,r[0].sliceInfoAr,e),u=r[0].startDecoding,c=r[0].finishDecoding,d=c-u,r[0].timeDecoding=d,r[0].timeCopy=0,postMessage({slice:a.buffer,sliceNum:y,width:e,height:t,infos:r},[a.buffer]),g=v-1,s=n,f=r[0].sliceInfoAr}):n.data.options.reuseMemory?(h=!0,o.onPictureDecoded=function(n,e,t,r){var a=new Uint8Array(A(n.length));a.set(n,0,n.length),postMessage({buf:a.buffer,length:n.length,width:e,height:t,infos:r},[a.buffer])}):o.onPictureDecoded=function(n,e,t,r){n&&(n=new Uint8Array(n));var a=new Uint8Array(n.length);a.set(n,0,n.length),postMessage({buf:a.buffer,length:n.length,width:e,height:t,infos:r},[a.buffer])},postMessage({consoleLog:"broadway worker initialized"}))}),!1)}return r.nowValue=t,r}()},void 0===(r=t.apply(e,[]))||(n.exports=r)}},e={};!function t(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return n[r].call(i.exports,i,i.exports,t),i.exports}(259)})();
//# sourceMappingURL=../../Decoder.worker.216b090d.map